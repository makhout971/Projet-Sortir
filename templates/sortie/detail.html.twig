{% extends 'layout.html.twig' %}

    {% block body %}
        <ul>

                <li>{{ sortie.nom }}</li>
                <li>{{ sortie.dateHeureDebut.date }}</li>
                <li>{{ sortie.dateLimiteInscription.date}}</li>
             <li>{{ sortie.infosSortie }}</li>
{#                TODO: chercher nb d'inscrits en base#}
                <li>{{ sortie.nbInscriptionMax }}</li>
                <li>{{ sortie.etat.libelle }}</li>
{#                TODO: chercher si utilisateur en session inscrit#}
                <li>{{ sortie.userOrganisateur.username }} </li>


{#                <li> <a href="{{ path('afficherUneSortie',{'id' :  sortie.id}) }}"> Afficher</a> </li>#}
                <br>

        </ul>
       Listes des participants :
            <br>
            <ul>
                {% for u in sortie.users %}
                    {% if app.user.id == u.id %}
                        <li><a href="{{ path('user_profil', {'id': u.id}) }}"> {{ u.username }} </a></li>
                    {% else %}
                     <li><a href="{{ path('other_user', {'id': u.id}) }}"> {{ u.username }} </a></li>
                    {% endif %}
                {% endfor %}
            </ul>
        {% set userInscritSortie = false %}
        {% if sortie.Users.contains(app.user) %}
            {% set userInscritSortie = true %}
        {% endif %}
        {% if  sortie.etat.id == 2 and userInscritSortie==false and sortie.users.count < sortie.nbInscriptionMax %}
            <li onclick="confirm('Confirmez votre inscription')"> <a href="{{ path('inscriptionSortie',{'id' :  sortie.id}) }}"> S'inscrire</a> </li>
        {% endif %}
        {% if  sortie.etat.id == 2 and userInscritSortie==true %}
            <li onclick="confirm('Confirmez votre désinscription')"> <a href="{{ path('desinscriptionSortie',{'id' :  sortie.id}) }}"> Se désinscrire</a> </li>
        {% endif %}

{#        <button><a href="{{ path('sortie') }}">Créer une sortie</a></button>#}

    {% endblock %}



